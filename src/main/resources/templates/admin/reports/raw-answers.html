<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/default}">

<head>
    <meta charset="UTF-8">
    <title>Questions</title>
</head>
<body>
<section layout:fragment="content">

	<form th:action="@{/reports/feedback/raw-answers/search}" th:object="${searchRawAnswersForm}" method="get">
	
	
        <input type="hidden" th:field="*{cycleId}"/>
        
        <div class="form-group">
            <label class="font-weight-bold" for="time">Questão</label>
            <select th:errorclass="is-invalid" class="form-control" name="questionId" th:field="*{questionId}">
                <option value="" selected>Todas</option>
                <option th:each="question : ${questionList}" th:value="${question.id}" th:text="${question.statement}"/>
            </select>
            <span class="text-danger" th:if="${#fields.hasErrors('questionId')}" th:errors="*{questionId}"></span>            			           
        </div>        
        	
        <div class="form-group">
            <label class="font-weight-bold" for="time">Time</label>
            <select th:errorclass="is-invalid" class="form-control" name="teamId" th:field="*{teamId}">
                <option value="" selected th:if="${@authenticatedUser.isPeople()}">Todos</option>
                <option th:each="team : ${teamList}" th:value="${team.id}" th:text="${team.name}"/>
            </select>
            <span class="text-danger" th:if="${#fields.hasErrors('teamId')}" th:errors="*{teamId}"></span>            			           
        </div>		
        <div class="form-group">
            <label class="font-weight-bold" for="time">Até a nota x</label>
            <input class="form-control" placeholder="nota máxima(ex:4)" th:field="*{maximumValue}"
                   th:errorclass="is-invalid">            
            <span class="text-danger" th:if="${#fields.hasErrors('maximumValue')}" th:errors="*{maximumValue}"></span>            			           
        </div>		
        
        <button class="btn btn-block btn-info">Filtrar</button>
	</form>	

	<div class="panel panel-default" th:each="question : ${allAnswersPerTeamList?.questions}">
	
		<div class="panel-heading">
		    <caption th:text="${question.statement}" class="panel-title">Panel title<</caption>
		</div>	
		<div class="panel-body">	
		    <table class="table table-hover table-bordered">
		        <thead>
		        <th>Dia</th>
		        <th>Time</th>
		        <th>Nota</th>
		        <th>Comentário</th>		        
		        </thead>
		        <tbody>
		        <tr th:each="answer : ${allAnswersPerTeamList.findAnswers(question)}">
		            <td th:text="${#temporals.format(answer.instant, 'dd/MM/yyyy kk:mm')}">05/05/2018 20:10</td>
		            <td th:text="${answer.team.name}">Comercial</td>
		            <td th:text="${answer.value}">4</td>
		            <td><p th:text="${answer.comments}" class="text-justify" style="overflow: scroll;">4</p></td>
		        </tr>
		        <tr>
		        	<td colspan="1" th:text="${'Média '+allAnswersPerTeamList.avg(question)}">Média 4.5</td>
		        </tr>
		        </tbody>
		    </table>	
	    </div>
	</div>
</section>
</body>
</html>